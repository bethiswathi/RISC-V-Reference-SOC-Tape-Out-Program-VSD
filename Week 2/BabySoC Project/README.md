# Overview
**VSDBabySoC** is a simple SoC integrating the RISC-V processor (rvmyth), a PLL and a DAC. This project focusses on IP core integration and validating the design through pre-synthesis and post-synthesis simulations.

## Project Structure
- src/include/  - Contains header files (*.vh) with macros/parameters
- src/module/   - Contains verilog source files for SoC modules
- output/       - stores compiled outputs and simulated results

## Environment Setup
### 1.<ins>**Create project directory**</ins>
<img width="700" height="50" alt="image" src="https://github.com/user-attachments/assets/c23877e9-49d9-4577-b247-a95c8494fb7e" /><br>
### 2.<ins>**Clone the Repository**</ins>
<img width="500" height="100" alt="image" src="https://github.com/user-attachments/assets/bcc72b8b-6e8f-41a3-8322-121cfed54a97" />

## Python Virtual Environment Setup
### 1.Install Dependencies
<img width="400" height="75" alt="image" src="https://github.com/user-attachments/assets/09c4741a-3079-4418-b12a-2c626d6cba36" /><br>
### 2.Create and Activate Virtual Environment
<img width="300" height="61" alt="image" src="https://github.com/user-attachments/assets/3a06fa86-0c66-4979-a49f-c61bbccad5ca" /><br>
### 3.Install Sandpiper-saas
<img width="450" height="60" alt="image" src="https://github.com/user-attachments/assets/2ef3b6ac-cb4d-425d-a424-c0a766eca941" /><br>
### 4.Convert TL-Verilog to Verilog
<img width="800" height="46" alt="image" src="https://github.com/user-attachments/assets/480550f4-d856-4ac2-8b3a-b0208fec09d6" /><br>




## Tools Required
- **Icarus Verilog** for compilation
- **Gtkwave** for viewing waveforms

## Module Descriptions
### **1. vsdbabysoc.v (Top-Level SoC Module)**
https://github.com/manili/VSDBabySoC/
- This is the top-level module that integrates the rvmyth, PLL and DAC modules.
- Inputs:
   - reset: Resets RISC-V core
   - VCO_IN, ENb_CP, ENb_VCO, REF: PLL control signals
   - VREFH: DAC reference voltage
- Outputs:
   - OUT: DAC analog output
   - RV_DAC: A 10-bit bus from RISC-V core to DAC
   - CLK: Clock generated by PLL
 
### **2. rvmyth.v (RISC-V Core)**
https://github.com/kunalg123/rvmyth/
- This module is a simple RISC-V based processor and outputs a 10-bit digital signal to be converted by DAC.
- Inputs:
   - reset: Initializes or Resets the processor 
   - CLK: Clock signal generated by PLL
- Outputs:
   - OUT: 10-bit digital data for DAC

### **3. avsdpll.v (PLL Module)**
https://github.com/lakshmi-sathi/avsdpll_1v8.git
- This is the top-level module that integrates the rvmyth, PLL and DAC modules.
- Inputs:
   - VCO_IN, ENb_CP, ENb_VCO, REF: PLL control/refernce signals
- Outputs:
   - CLK: Stable clock for core and module

### **4. avsddac.v (DAC Module)**
https://github.com/vsdip/rvmyth_avsddac_interface.git
- This is the top-level module that integrates the rvmyth, PLL and DAC modules.
- Inputs:
   - D: 10-bit digital input from processor
   - VREFH: DAC Reference voltage
- Outputs:
   - OUT: analog output signal
   
## Testbench (testbench.v)
- It is a test module
- Verifies **vsdbabysoc** functionality
- Handles **signal initialization, clock generation** and **waveform dumping**

### <ins>**Waveform Output**</ins>
- pre_synth_sim.vcd (pre-synthesis)
- post_synth_sim.vcd (post-synthesis)

### <ins>**Simulation Steps**</ins>
- Initialize the signals
- Generate clock/reset
- Run pre/post-synthesis simulation
- Dump waveforms to .vcd files

## Pre-Synthesis Simulation of vsdbabysoc
Pre-synthesis simulation of BabySoC involves verifying the **Rtl design behavior** before synthesis. It checks the functional correctness using testbenches, ignoring gate level details and helps catch errors early in the design flow.
<br><br>
The commands used are<br>
   make_pre_synth_sim <br><br>
<img width="700" height="402" alt="image" src="https://github.com/user-attachments/assets/ae712481-0e29-4728-81cb-687f7b053914" />
<br> <br>
<img width="700" height="200" alt="image" src="https://github.com/user-attachments/assets/967bde09-8398-416e-a239-e4a32c62d464" />
<br>

- The **gtkwave** simulation of **vsdbabysoc** shows
   - **clk**: PLL generated clock driving the RVMYTH core <br>
   - **reset**: External reset for the core<br>
   - **RV_DAC[9:0]** : 10-bit digital output from RVMYTH to DAC
   - **out (digital)**: digital representation of DAC output
   - **out(analog)**: real-valued DAC output showing smooth analog waveform.

**Explanation**: The RVMYTH core continuously sends 10-bit digital values to DAC which converts them into a smooth analog signal.
<br> <br>

<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/dca20f2f-2d04-496b-bf73-230b5ba98952" />

## Synthesis of BabySoC using Yosys
The following are the commands that are used
<img width="800" height="400" alt="image" src="https://github.com/user-attachments/assets/cefc3123-f0f1-4f4c-929d-9dc6236d335a" /><br><br>
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/ee64c48e-cc98-466e-80c5-79101adf1697" /><br><br>
<img width="700" height="50" alt="image" src="https://github.com/user-attachments/assets/344caa11-b5db-4002-ba36-a97718e5ec09" /><br><br>
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/8779999b-1532-423c-a449-0eb26778e517" /><br><br>
<img width="402" height="300" alt="image" src="https://github.com/user-attachments/assets/c6ed313d-f844-4bd0-8aeb-cb751534d6b4" /><br><br>
<img width="466" height="350" alt="image" src="https://github.com/user-attachments/assets/15071508-c760-4dbd-aef2-048b02d77afc" /><br><br>
<img width="449" height="300" alt="image" src="https://github.com/user-attachments/assets/5c777b9b-8d0b-4fa5-b74d-ee31f62db16b" /><br><br>
<img width="418" height="300" alt="image" src="https://github.com/user-attachments/assets/a9191fda-319c-4930-8446-e70c29827f79" /><br><br>
<img width="800" height="300" alt="image" src="https://github.com/user-attachments/assets/023fa2a1-ddeb-4f0d-9057-7ff862a3c18d" /><br><br>
<img width="700" height="80" alt="image" src="https://github.com/user-attachments/assets/78b004a6-46d4-40a7-9cfd-19093c957b94" /><br>
<img width="250" height="40" alt="image" src="https://github.com/user-attachments/assets/9d75a277-6dcc-46e9-8066-0272e55410f6" />





## Post-Synthesis Simulation
 Post-synthesis checks the synthesized design'sfunctionality and produces a VCD file for viewing the waveform in gtkwave.<br><br>
 <img width="700" height="400" alt="image" src="https://github.com/user-attachments/assets/d0995cf6-09d7-4a5b-99e2-f85a3d26d45b" /> <br><br>
 <img width="940" height="534" alt="image" src="https://github.com/user-attachments/assets/846249a2-264a-4b14-a6e8-1270993efaaa" />
**Explanation**:
- **CLK**: clock input to the RVMYTH core
- **reset**: signal to initialize/reset the core
- **out/\core.OUT[9:0]**: 10-bit digital output from the core. 
- **OUT**: DAC output (simulated in GLS)


<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/777877cc-44ac-475f-b79e-b08220c38869" />
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/50e4bcfc-93f5-40b2-a0e7-0de4dbfbc42e" />

<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/0161520c-3fa5-4ba6-91c5-0d94c5788cc3" />
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/6b38d63a-23e1-4527-a916-d9c25d37f59b" />


<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/783bf95c-efdc-4f30-9de9-3e98f153c4d0" />
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/9aca3407-4663-41dc-bc24-3aeaa5bc43c8" />

## RVMYTH Simulation
<img width="700" height="300" alt="image" src="https://github.com/user-attachments/assets/f6ca9f90-aeeb-471d-8c86-c570a7eb1918" />
<br>

**Explanation**:
- clk: It is a continuous square wave.
- reset: when reset=1, all internal registers in rvmyth are cleared.
- out[9:0]: This is a 10-bit output bus typically connected to DAC input or some test output port. After reset goes low we can see small changes in digital value.
- The wavy green pattern is not analog it's the digital 10-bit value plotted as an analog like trace in gtkwave.


  
